<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <style>
        html, body
        {
            padding: 0;
            margin: 0;
            overflow: hidden;
            height:100%;
        }
        canvas
        {
            border: solid, 2px, dodgerblue;
            
        }
    </style>
    <script>
    var objects = [];
    var ball = {
        radius: 5,
        x: 50,
        y: 50,
        mass: 40,
        yVelocity: -20,
        xVelocity: 0,
        yAcceleration: 98,
        xAcceleration: 0,
        elasticity: 0.5,
        color: "#000000"
    };
    var ball2 = {
        radius: 5,
        x: 100,
        y: 50,
        mass: 40,
        yVelocity: -20,
        xVelocity: 0,
        yAcceleration: 98,
        xAcceleration: 0,
        elasticity: 0.5,
        color: "#000000"
    };
    var ball3 = {
        radius: 5,
        x: 150,
        y: 50,
        mass: 40,
        yVelocity: -20,
        xVelocity: -20,
        yAcceleration: 98,
        xAcceleration: 0,
        elasticity: 0.5,
        color: "#000000"
    };
    objects.push(ball2);
    
    objects.push(ball3);
    
    objects.push(ball);
    // const g = {direction: 0, magnitude: 9.8};
    var canvas;
    var ctx;
        $( document ).ready(function()
        {
             canvas = document.getElementById("main-canvas");
            
             ctx = canvas.getContext("2d");
              updateCanvas( objects );
            
            // may not be nec while setTimeout on fixed interval..
            var start = performance.now();
            var end;
            
            setInterval(() => {
                end = performance.now();
                updateBall( (end - start) / 1000, objects);
                start = end;
            }, 17 /* runs about 59 times per second */);
            

        });

        function updateBall ( timePassed, objects )
        {
            objects.forEach(object => {
                object.yVelocity += object.yAcceleration * timePassed;
                object.y += object.yVelocity * timePassed;
                object.xVelocity +=object.xAcceleration * timePassed;
                object.x += object.xVelocity * timePassed;
            if(object.y + object.radius >= canvas.height)
            {
                object.yVelocity *= -object.elasticity;
                object.y = canvas.height - object.radius;
            }
            });
            checkCollisions( objects );
            console.log(timePassed);
            updateCanvas( objects );
        }
        
        function checkCollisions( objects )
        {
          for (let i = 0; i < objects.length; i++)
          {
            for (let j = i + 1; j < objects.length; j++)
            {
              const obj1 = objects[i];
              const obj2 = objects[j];
              if (detectCollision(obj1, obj2))
              {
                handleCollision(obj1, obj2);
              }
            }
          }
        }
        
        function updateCanvas( objects )
        {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            objects.forEach(object => {
              ctx.strokeStyle = object.color;
              ctx.beginPath();
              ctx.arc(object.x, object.y, object.radius, 0, 2 * Math.PI);
              ctx.stroke();
            });
            }
        
        function detectCollision(obj1, obj2)
        {
          const distance = Math.sqrt(Math.pow(obj2.x - obj1.x, 2) + Math.pow(obj2.y - obj1.y, 2));
          if (distance <= obj1.radius + obj2.radius)
          {
            obj1.color = "#0000FF";
            obj2.color = "#0000FF";
            return true;
          }
          return false;
        }

        
        function handleCollision(obj1, obj2) 
        {
          
        }
    </script>
</head>
<body>
    <canvas id="main-canvas">

    </canvas>
</body>
</html>
