<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <style>
        html, body
        {
            padding: 0;
            margin: 0;
            overflow: hidden;
            height:100%;
            
        }
        body
        {
          display: flex;
          justify-content: center;
          align-items: center;
        }
        canvas
        {
          border: 2px solid dodgerBlue;
        }
        
        #mylog
        {
          position: absolute;
          left: 0;
          top: 0;
          height: 50%;
          overflow-y: scroll;
          border: 2px solid black;
          width: 30%;
        }
    </style>
    <script src="physics.js"></script>
    <script>
    
    
    var floor = {
      
    };
    
    
    
    var ball = new Ball({
      radius: 50,
      
    });
    var ball2 = new Ball({
      radius: 10,
      x: 100,
      y: 50,
      color: "#FF00FF"
    });
    var ball3 = new Ball({
      radius: 10,
      x: 150,
      y: 50,
      yVelocity: -50,
      yAcceleration: 98,
      color: "#FF0000"
    });
    
    // const g = {direction: 0, magnitude: 9.8};
    var canvas;
    var ctx;
        $( document ).ready(function()
        {
              var baseLogFunction = console.log;
          console.log = function(){
              baseLogFunction.apply(console, arguments);
      
              var args = Array.prototype.slice.call(arguments);
              for(var i=0;i<args.length;i++){
                  var node = createLogNode(args[i]);
                  document.querySelector("#mylog").appendChild(node);
              }
      
          }
      
          function createLogNode(message){
              var node = document.createElement("div");
              var textNode = document.createTextNode(message);
              node.appendChild(textNode);
              return node;
          }
      
          window.onerror = function(message, url, linenumber) {
              console.log("JavaScript error: " + message + " on line " +
                  linenumber + " for " + url);
          }
          
      console.log("test");
      console.log("test");
      //console.log("the error below is intentional to test error handling");
      //throw new Error("Test Error");
    
              canvas = document.getElementById("main-canvas");
              render();
              function render()
              {
                const dimensions = getObjectFitSize(
                  true,
                  canvas.clientWidth,
                  canvas.clientHeight,
                  canvas.width,
                  canvas.height
                );
                canvas.width = dimensions.width;
                canvas.height = dimensions.height;
                ctx = canvas.getContext("2d");
                updateCanvas( objects );
              }
              
            // adapted from: https://www.npmjs.com/package/intrinsic-scale
            function getObjectFitSize(
              contains /* true = contain, false = cover */,
              containerWidth,
              containerHeight,
              width,
              height
            ) {
              var doRatio = width / height;
              var cRatio = containerWidth / containerHeight;
              var targetWidth = 0;
              var targetHeight = 0;
              var test = contains ? doRatio > cRatio : doRatio < cRatio;
            
              if (test) {
                targetWidth = containerWidth;
                targetHeight = targetWidth / doRatio;
              } else {
                targetHeight = containerHeight;
                targetWidth = targetHeight * doRatio;
              }
            
              return {
                width: targetWidth,
                height: targetHeight,
                x: (containerWidth - targetWidth) / 2,
                y: (containerHeight - targetHeight) / 2
              };
            }
        });
    </script>
</head>
<body>
    <canvas id="main-canvas">
    </canvas>
    <div id="mylog"></div>
</body>
</html>
